# User Service Endpoints

This directory contains the endpoints for the user service microservice.

## Add User Endpoint

**Subject:** `user_service.add`

**Description:** Adds a new user to the system with validation for required fields.

### Request Format

```json
{
  "user": {
    "first_name": "string",     // Required
    "last_name": "string",      // Required
    "email": "string",          // Required
    "birth": "YYYY-MM-DDTHH:MM:SSZ", // Optional (ISO 8601 format)
    "active": true              // Optional (defaults based on implementation)
  }
}
```

### Sample Commands

#### Minimal Valid User
```bash
nats req user_service.add '{"user":{"first_name":"John","last_name":"Doe","email":"john.doe@example.com"}}'
```

#### Complete User with All Fields
```bash
nats req user_service.add '{"user":{"first_name":"Jane","last_name":"Smith","email":"jane.smith@example.com","birth":"1990-05-15T00:00:00Z","active":true}}'
```

#### More Examples
```bash
# User with birth date only
nats req user_service.add '{"user":{"first_name":"Alex","last_name":"Johnson","email":"alex.j@company.com","birth":"1985-12-03T00:00:00Z"}}'

# Inactive user
nats req user_service.add '{"user":{"first_name":"Mike","last_name":"Brown","email":"mike.b@domain.com","active":false}}'

# User with special characters in name
nats req user_service.add '{"user":{"first_name":"José","last_name":"García","email":"jose.garcia@español.com"}}'
```

### Expected Response

```json
{
  "uuid": "018f5e7c-8b5a-7a1b-8c5d-123456789abc"
}
```

### Error Examples

#### Missing Required Fields
```bash
# Missing email
nats req user_service.add '{"user":{"first_name":"John","last_name":"Doe"}}'
# Response: 500 - user is invalid: Email is required
```

#### Invalid Request Format
```bash
# Empty request
nats req user_service.add '{}'
# Response: 500 - user is invalid: FirstName is required

# Invalid JSON
nats req user_service.add '{"user":{"first_name":"John"'
# Response: 400 - invalid request format
```

### Validation Rules

- **FirstName**: Required, non-empty string
- **LastName**: Required, non-empty string
- **Email**: Required, non-empty string (format validation noted as TODO)
- **Birth**: Optional, ISO 8601 datetime format
- **Active**: Optional, boolean
- **Uuid**: Auto-generated by service, should not be provided in request

### Notes

- The service automatically generates a UUID for each new user
- The `birth` field uses ISO 8601 format (e.g., "1990-05-15T00:00:00Z")
- Email format validation is planned but not currently implemented
- All datetime fields should be in UTC timezone